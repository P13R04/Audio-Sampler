<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Debug Test</title>
</head>
<body>
  <h1>Debug Test</h1>
  <div id="output"></div>
  
  <script type="module">
    const output = document.getElementById('output');
    
    // Test 1: Fetch API
    output.innerHTML += '<p>Test 1: Fetching presets...</p>';
    try {
      const response = await fetch('http://localhost:3000/api/presets');
      const data = await response.json();
      output.innerHTML += `<p style="color:green">✓ API OK: ${data.length} presets</p>`;
    } catch (err) {
      output.innerHTML += `<p style="color:red">✗ API Error: ${err.message}</p>`;
    }
    
    // Test 2: Import main.js
    output.innerHTML += '<p>Test 2: Loading main.js...</p>';
    try {
      const module = await import('./js/main.js');
      output.innerHTML += '<p style="color:green">✓ main.js loaded</p>';
      output.innerHTML += `<p>Exports: ${Object.keys(module).join(', ')}</p>`;
      
      // Test 3: Try to start sampler
      if (module.startSampler) {
        output.innerHTML += '<p>Test 3: Starting sampler...</p>';
        await module.startSampler();
        output.innerHTML += '<p style="color:green">✓ Sampler started</p>';
      }
    } catch (err) {
      output.innerHTML += `<p style="color:red">✗ Module Error: ${err.message}</p>`;
      output.innerHTML += `<pre>${err.stack}</pre>`;
    }
  </script>
</body>
</html>
